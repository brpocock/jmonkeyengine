<h1><a
name="jme_3_tutorial_4_-_hello_update_loop">JME 3 Tutorial (4) - Hello Update Loop</a></h1><div
class="level1"><p> Previous: <a
href="/com/jme3/gde/core/docs/jme3/beginner/hello_asset.html">Hello Assets</a>,
Next: <a
href="/com/jme3/gde/core/docs/jme3/beginner/hello_input_system.html">Hello Input System</a></p><p> Now that you know how to load assets such as 3-D models, you want them to implement the actual gameplay. In this tutorial we look at the update loop. The update loop of your game is where the action happens.</p></div><h2><a
name="code_sample">Code Sample</a></h2><div
class="level2"><pre>package jme3test.helloworld;
&nbsp;
import com.jme3.app.SimpleApplication;
import com.jme3.material.Material;
import com.jme3.math.ColorRGBA;
import com.jme3.math.Vector3f;
import com.jme3.scene.Geometry;
import com.jme3.scene.shape.Box;
&nbsp;
<span>/** Sample 4 - how to trigger repeating actions from the main update loop.
 * In this example, we make the player character rotate. */</span>
public class HelloLoop extends SimpleApplication &#123;
&nbsp;
    public static void main&#40;String&#91;&#93; args&#41;&#123;
        HelloLoop app = new HelloLoop&#40;&#41;;
        app.start&#40;&#41;;
    &#125;
&nbsp;
    protected Geometry player;
&nbsp;
    @Override
    public void simpleInitApp&#40;&#41; &#123;
&nbsp;
        Box&#40;Vector3f.ZERO, 1, 1, 1&#41;;
        player = new Geometry&#40;&quot;blue cube&quot;, b&#41;;
        Material mat = new Material&#40;assetManager, &quot;Common/MatDefs/Misc/Unshaded.j3md&quot;&#41;;
        mat.setColor&#40;&quot;Color&quot;, ColorRGBA.Blue&#41;;
        player.setMaterial&#40;mat&#41;;
        rootNode.attachChild&#40;player&#41;;
    &#125;
&nbsp;
    /* This is the update loop */
    @Override
    public void simpleUpdate&#40;float tpf&#41; &#123;
        // make the player rotate
        player.rotate&#40;0, 2*tpf, 0&#41;;
    &#125;
&#125;</pre><p> Build and run the file: You see a constantly rotating cube.</p></div><h2><a
name="understanding_the_code">Understanding the Code</a></h2><div
class="level2"><p> Compared to our previous code samples you note that the player Geometry is now a class field. This is because we want the update loop to be able to access and transform this Geometry. As you can see, we initialize the player object in the <code>simpleInitApp()</code> method.</p><p> Now have a closer look at the <code>simpleUpdate()</code> method, this is the update loop.</p><ul><li
class="level1"><div
class="li"> The <code>player.rotate(0, 2*tpf, 0);</code> line changes the rotation of the player object.</div></li><li
class="level1"><div
class="li"> We use the <code>tpf</code> variable (&quot;time per frame&quot;) to time this action depending on the current frames per second rate. This means the cube rotates with the same speed on fast machines, and the game remains playable.</div></li></ul></div><h2><a
name="the_update_loop">The Update Loop</a></h2><div
class="level2"><p> A rotating object is just a simple example. In the update loop, you can update score and health points, check for collisions, make enemies calculate their next move, roll the dice whether a trap has been set off, play random ambient sounds, and much more.</p><ul><li
class="level1"><div
class="li"> The update loop starts after the <code>simpleInitApp()</code> method has set up the scenegraph and state variables.</div></li><li
class="level1"><div
class="li"> JME executes everything in the <code>simpleUpdate()</code> method repeatedly, as fast as possible.</div><ol><li
class="level2"><div
class="li"> Use the loop to poll the game state and initiate actions.</div></li><li
class="level2"><div
class="li"> Use the loop to trigger reactions and update the game state.</div></li><li
class="level2"><div
class="li"> Use it wisely, because having too many calls in the loop also slows down the game.</div></li></ol></li></ul></div><h2><a
name="exercises">Exercises</a></h2><div
class="level2"><p> Here are some fun things to try:</p><ol><li
class="level1"><div
class="li"> What happens if you give the rotate() method negative numbers?</div></li><li
class="level1"><div
class="li"> Can you create two models next to each other, and make one rotate twice as fast as the other? (use the <code>tpf</code>)</div></li><li
class="level1"><div
class="li"> Can you make a cube that pulsates? (grows and shrinks)</div></li><li
class="level1"><div
class="li"> Can you make a rolling cube? (spin around the x axis, and translate along the z axis)</div></li></ol><p> Look back at the <a
href="/com/jme3/gde/core/docs/jme3/beginner/hello_node.html">Hello Node</a> tutorial if you do not remember the transformation methods for scaling, translating, and rotating.</p></div><h2><a
name="conclusion">Conclusion</a></h2><div
class="level2"><p> Now you are listening to the update loop, &quot;the heart beat&quot; of the game, and you can add all kinds of action to it.</p><p> The next thing the game needs is some <em>inter</em>action! Continue learning how to <a
href="/com/jme3/gde/core/docs/jme3/beginner/hello_input_system.html">respond to user input</a>.</p><hr
/><p> See also: Advanced jME3 developers additionally use <a
href="/com/jme3/gde/core/docs/jme3/advanced/application_states.html">Application States</a> and <a
href="/com/jme3/gde/core/docs/jme3/advanced/custom_controls.html">Custom Controls</a> to implement more complex mechanics in their game loops. You will come across these topics later when you proceed to advanced documentation.</p><div
class="tags"><span> <a
href="/wiki/doku.php/tag:documentation?do=showtag&amp;tag=tag%3Adocumentation">documentation</a>, <a
href="/wiki/doku.php/tag:beginner?do=showtag&amp;tag=tag%3Abeginner">beginner,</a>, <a
href="/wiki/doku.php/tag:state?do=showtag&amp;tag=tag%3Astate">state</a>, <a
href="/wiki/doku.php/tag:states?do=showtag&amp;tag=tag%3Astates">states</a>, <a
href="/wiki/doku.php/tag:intro?do=showtag&amp;tag=tag%3Aintro">intro</a>, <a
href="/wiki/doku.php/tag:beginner?do=showtag&amp;tag=tag%3Abeginner">beginner</a>, <a
href="/wiki/doku.php/tag:controller?do=showtag&amp;tag=tag%3Acontroller">controller</a>, <a
href="/wiki/doku.php/tag:controllers?do=showtag&amp;tag=tag%3Acontrollers">controllers</a>, <a
href="/wiki/doku.php/tag:loop?do=showtag&amp;tag=tag%3Aloop">loop</a> </span></div></div>
<p><em><a href="http://jmonkeyengine.org/wiki/doku.php/jme3:beginner:hello_main_event_loop?do=export_xhtmlbody">view online version</a></em></p>