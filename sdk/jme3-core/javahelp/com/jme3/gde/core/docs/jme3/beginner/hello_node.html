<h1><a
name="jme_3_tutorial_2_-_hello_node">JME 3 Tutorial (2) - Hello Node</a></h1><div
class="level1"><p> Previous: <a
href="/com/jme3/gde/core/docs/jme3/beginner/hello_simpleapplication.html">Hello SimpleApplication</a>,
Next: <a
href="/com/jme3/gde/core/docs/jme3/beginner/hello_asset.html">Hello Assets</a>. <br/> <br/> When creating a 3D game, you start out with creating a scene and some objects. You place the objects (player tokens, obstacles, etc) in the scene, and move, resize, rotate, color, and animate them. <br/> <br/> In this tutorial we will have a look at a simple 3D scene. You will learn that the 3D world is represented in a scene graph, and why the rootNode is important. You will learn how to create simple objects and how to transform them – move, scale, rotate. You will understand the difference between the two types of Spatials in the scene graph, Node and Geometry. For a visual introduction to the scene graph check out our <a
href="/com/jme3/gde/core/docs/jme3/scenegraph_for_dummies.html"> Scene Graph for Dummies</a> presentation.</p></div><h2><a
name="code_sample">Code Sample</a></h2><div
class="level2"><pre>package jme3test.helloworld;
import com.jme3.app.SimpleApplication;
import com.jme3.material.Material;
import com.jme3.math.Vector3f;
import com.jme3.scene.Geometry;
import com.jme3.scene.shape.Box;
import com.jme3.math.ColorRGBA;
import com.jme3.scene.Node;
<span>/** Sample 2 - How to use nodes as handles to manipulate objects in the scene graph.
 * You can rotate, translate, and scale objects by manipulating their parent nodes.
 * The Root Node is special: Only what is attached to the Root Node appears in the scene. */</span>
public class HelloNode extends SimpleApplication &#123;
    public static void main&#40;String&#91;&#93; args&#41;&#123;
        HelloNode app = new HelloNode&#40;&#41;;
        app.start&#40;&#41;;
    &#125;
    @Override
    public void simpleInitApp&#40;&#41; &#123;
        // create a blue box at coordinates (1,-1,1)
        Box&#40; new Vector3f&#40;1,-1,1&#41;, 1,1,1&#41;;
        Geometry blue = new Geometry&#40;&quot;Box&quot;, box1&#41;;
        Material mat1 = new Material&#40;assetManager, &quot;Common/MatDefs/Misc/Unshaded.j3md&quot;&#41;;
        mat1.setColor&#40;&quot;Color&quot;, ColorRGBA.Blue&#41;;
        blue.setMaterial&#40;mat1&#41;;
        // create a red box straight above the blue one at (1,3,1)
        Box&#40; new Vector3f&#40;1,3,1&#41;, 1,1,1&#41;;
        Geometry red = new Geometry&#40;&quot;Box&quot;, box2&#41;;
        Material mat2 = new Material&#40;assetManager, &quot;Common/MatDefs/Misc/Unshaded.j3md&quot;&#41;;
        mat2.setColor&#40;&quot;Color&quot;, ColorRGBA.Red&#41;;
        red.setMaterial&#40;mat2&#41;;
        // create a pivot node at (0,0,0) and attach it to root
        Node pivot = new Node&#40;&quot;pivot&quot;&#41;;
        rootNode.attachChild&#40;pivot&#41;;
        // attach the two boxes to the *pivot* node!
        pivot.attachChild&#40;blue&#41;;
        pivot.attachChild&#40;red&#41;;
        // rotate pivot node: Both boxes have rotated!
        pivot.rotate&#40; 0.4f , 0.4f , 0.0f &#41;;
    &#125;
&#125;</pre><p> Build and run the code sample. You should see two colored boxes tilted at the same angle.</p></div><h2><a
name="understanding_the_terminology">Understanding the Terminology</a></h2><div
class="level2"><p> In this tutorial, you will learn some new terms:</p><ol><li
class="level1"><div
class="li"> The <em>scene graph</em> represents your 3D world.</div></li><li
class="level1"><div
class="li"> Objects in the scene graph (such as the boxes in this example) are called <em>Spatials</em>.</div><ul><li
class="level2"><div
class="li"> A Spatial is a collection of information about an object: its location, rotation, and scale.</div></li><li
class="level2"><div
class="li"> A Spatial can be loaded, transformed, and saved.</div></li></ul></li><li
class="level1"><div
class="li"> There are two types of Spatials, <em>Nodes</em> and <em>Geometries</em>.</div></li><li
class="level1"><div
class="li"> To add a Spatial to the scene graph, you attach the Spatial to the <em>rootNode</em>.</div></li><li
class="level1"><div
class="li"> Everything attached to the <em>rootNode</em> is part of the scene graph.</div></li></ol></div><h2><a
name="understanding_the_code">Understanding the Code</a></h2><div
class="level2"><p> So what exactly happens in this code snippet? Note that we are using the <code>simpleInitApp()</code> method that was introduced in the first tutorial.</p><ol><li
class="level1"><div
class="li"> We create a box Geometry.</div><ul><li
class="level2"><div
class="li"> The box Geometry&#039;s extends are (1,1,1), that makes it 2x2x2 world units big.</div></li><li
class="level2"><div
class="li"> We place the box at (1,-1,1)</div></li><li
class="level2"><div
class="li"> We give it a solid blue material.<pre>        Box&#40; new Vector3f&#40;1,-1,1&#41;, 1,1,1&#41;;
        Geometry blue = new Geometry&#40;&quot;Box&quot;, box1&#41;;
        Material mat1 = new Material&#40;assetManager, &quot;Common/MatDefs/Misc/Unshaded.j3md&quot;&#41;;
        mat1.setColor&#40;&quot;Color&quot;, ColorRGBA.Blue&#41;;
        blue.setMaterial&#40;mat1&#41;;</pre></div></li></ul></li><li
class="level1"><div
class="li"> We create a second box Geometry.</div><ul><li
class="level2"><div
class="li"> This box Geometry is also 2x2x2 world units big.</div></li><li
class="level2"><div
class="li"> We place the second box at (1,3,1). This is straight above the blue box, with a gap of 2 world units inbetween.</div></li><li
class="level2"><div
class="li"> We give it a solid red material<pre>        Box&#40; new Vector3f&#40;1,3,1&#41;, 1,1,1&#41;;
        Geometry red = new Geometry&#40;&quot;Box&quot;, box2&#41;;
        Material mat2 = new Material&#40;assetManager, &quot;Common/MatDefs/Misc/Unshaded.j3md&quot;&#41;;
        mat2.setColor&#40;&quot;Color&quot;, ColorRGBA.Red&#41;;
        red.setMaterial&#40;mat2&#41;;</pre></div></li></ul></li><li
class="level1"><div
class="li"> We create a Node.</div><ul><li
class="level2"><div
class="li"> By default the Node is placed at (0,0,0).</div></li><li
class="level2"><div
class="li"> We attach the Node to the rootNode.</div></li><li
class="level2"><div
class="li"> An attached Node has no visible appearance in the scene.<pre>        Node pivot = new Node&#40;&quot;pivot&quot;&#41;;
        rootNode.attachChild&#40;pivot&#41;;</pre></div></li></ul></li><li
class="level1"><div
class="li"> Note that we have not attached the two boxes to anything yet!</div><ul><li
class="level2"><div
class="li"> <em>If we ran the application now, the scenegraph would appear empty.</em></div></li></ul></li><li
class="level1"><div
class="li"> We attach the two boxes to the node.</div><ul><li
class="level2"><div
class="li"> <em>If we ran the app now, we would see two boxes: one straight above the other.</em><pre>        pivot.attachChild&#40;blue&#41;;
        pivot.attachChild&#40;red&#41;; </pre></div></li></ul></li><li
class="level1"><div
class="li"> Now, we rotate the node.</div><ul><li
class="level2"><div
class="li"> <em>When we run the application now, we see two boxes on top of each other – but both are tilted at the same angle.</em><pre>        pivot.rotate&#40; 0.4f , 0.4f , 0.0f &#41;;</pre></div></li></ul></li></ol><p> What has happened? We have attached two box Geometries to a Node. Then we used the Node as a handle to grab the two boxes and transform (rotate) both, in one step. This is a common task and you will use this method a lot in your games when you move game characters around.</p></div><h3><a
name="definitiongeometry_vs_node">Definition: Geometry vs Node</a></h3><div
class="level3"><p> You work with two types of Spatials in your scenegraph: Nodes and Geometries. Here is the difference:</p><div
class="table sectionedit1"><table
class="inline"><tr
class="row0"><td
class="col0 leftalign"></td><th
class="col1"> Geometry</th><th
class="col2"> Node</th></tr><tr
class="row1"><th
class="col0"> Visibility:</th><td
class="col1"> A visible 3-D object.</td><td
class="col2"> An invisible &quot;handle&quot;.</td></tr><tr
class="row2"><th
class="col0"> Purpose:</th><td
class="col1"> A Geometry stores an object&#039;s looks.</td><td
class="col2"> A Node groups Geometries and other Nodes together.</td></tr><tr
class="row3"><th
class="col0"> Examples:</th><td
class="col1"> A box, a sphere, player, a building, a piece of terrain, a vehicle, missiles, NPCs, etc…</td><td
class="col2"> The default <code>rootNode</code>, the <code>guiNode</code> (for on-screen text); a floor node, a custom vehicle-with-passengers node, an audio node, etc…</td></tr></table></div></div><h2><a
name="faqhow_to_populate_the_scenegraph">FAQ: How to Populate the Scenegraph?</a></h2><div
class="level2"><div
class="table sectionedit2"><table
class="inline"><tr
class="row0"><th
class="col0"> Task?</th><th
class="col1"> Solution!</th></tr><tr
class="row1"><td
class="col0"> Create a Spatial</td><td
class="col1"> Create a shape and give it a Material. For instance a box shape:<pre>Box&#40;Vector3f.ZERO, 1, 1, 1&#41;;
Geometry thing = new Geometry&#40;&quot;thing&quot;, mesh&#41;;
Material mat = new Material&#40;assetManager, &quot;Common/MatDefs/Misc/ShowNormals.j3md&quot;&#41;;
thing.setMaterial&#40;mat&#41;;</pre></td></tr><tr
class="row2"><td
class="col0"> Make an object appear in the scene</td><td
class="col1"> Attach the Spatial to the <code>rootNode</code>, or to any node that is attached to the rootNode.<pre>rootNode.attachChild&#40;thing&#41;;</pre></td></tr><tr
class="row3"><td
class="col0"> Remove objects from the scene</td><td
class="col1"> Detach the Spatial from the <code>rootNode</code>, and from any node that is attached to the rootNode.<pre>rootNode.detachChild&#40;thing&#41;;</pre><pre>rootNode.detachAllChildren&#40;&#41;;</pre></td></tr><tr
class="row4"><td
class="col0"> Find a Spatial in the scene by the object&#039;s name or ID</td><td
class="col1"> Look at the node&#039;s children.<pre>Spatial thing = rootNode.getChild&#40;&quot;thing&quot;&#41;;</pre><pre>Spatial twentyThird = rootNode.getChild&#40;22&#41;;</pre></td></tr><tr
class="row5"><td
class="col0"> Specify what should be loaded at the start</td><td
class="col1"> Everything you initialize and attach to the <code>rootNode</code> in the <code>simpleInitApp()</code> method is part of the scene at the start of the game.</td></tr></table></div></div><h2><a
name="how_to_transform_objects">How to Transform Objects?</a></h2><div
class="level2"><p> There are three types of 3D transformation: Translation (moving), Scaling (resizing), and Rotation (turning).</p><div
class="table sectionedit3"><table
class="inline"><tr
class="row0"><th
class="col0"> Task?</th><th
class="col1"> Solution!</th><th
class="col2"> X</th><th
class="col3"> Y</th><th
class="col4"> Z</th></tr><tr
class="row1"><td
class="col0"> Position and move objects</td><td
class="col1"> <strong>Translation:</strong> Specify the new location in three dimensions: right/left, up/down, forward/backward. <br/> Example 1. To move an object <em>to</em> specific coordinates, such as (0,40.2f,-2), use:<pre>thing.setLocalTranslation&#40; new Vector3f&#40; 0.0f, 40.2f, -2.0f &#41; &#41;;</pre><p> <br/> Example 2: To move an object <em>by</em> a certain amount, e.g. higher up (y=40.2f) and further back (z=-2.0f):</p><pre>thing.move&#40; 0.0f, 40.2f, -2.0f &#41;;</pre></td><td
class="col2">right/left</td><td
class="col3">up/down</td><td
class="col4">forward/ backward</td></tr><tr
class="row2"><td
class="col0"> Resize objects</td><td
class="col1"> <strong>Scaling:</strong> To resize a Spatial, specify the scale factor in each dimension: length, height, width. A value between 0.0f and 1.0f will shrink the object; a value bigger than 1.0f will make it grow; and 1.0f will keep this dimension the same. Using the same value for each dimension scales an object proportionally, using different values stretches it. <br/> Example: Make it 10 times longer, one tenth of the height, same width:<pre>thing.setLocalScale&#40; 10.0f, 0.1f, 1.0f  &#41;;</pre><pre>thing.scale&#40; 10.0f, 0.1f, 1.0f &#41;;</pre></td><td
class="col2">length</td><td
class="col3">height</td><td
class="col4">width</td></tr><tr
class="row3"><td
class="col0"> Turn objects</td><td
class="col1"> <strong>Rotation:</strong> 3-D rotation is a bit tricky (<a
href="/com/jme3/gde/core/docs/jme2/rotate.html">learn details here</a>). In short: You can rotate around three axes, pitch, yaw, and roll. <br/> Important: <strong>You do not specify the rotation in degrees from 0° to 360°, but in radians from 0.0f to 6.28f (FastMath.PI*2) !</strong> <br/> Example: To roll an object 180° around the z axis:<pre>thing.rotate&#40; 0f , 0f , FastMath.PI &#41;;</pre><p> If you do want to specify angles in degrees then multiply your degrees value with FastMath.DEG_TO_RAD <br/> Example:</p><pre>thing.rotate&#40; 0f , 0f , 180*FastMath.DEG_TO_RAD &#41;;</pre><p> Tip: If your game idea calls for a serious amount of rotations, it is worth looking into <a
href="/com/jme3/gde/core/docs/jme2/quaternion.html">quaternion</a>s, a data structure that can combine and store rotations efficiently.</p><pre>thing.setLocalRotation&#40; new Quaternion&#40;&#41;. fromAngleAxis&#40;FastMath.PI/2, new Vector3f&#40;1,0,0&#41;&#41;&#41;;</pre></td><td
class="col2">pitch</td><td
class="col3">yaw</td><td
class="col4">roll</td></tr></table></div></div><h2><a
name="how_to_troubleshoot_nodes">How to Troubleshoot Nodes?</a></h2><div
class="level2"><p> If you get unexpected results, check whether you made the following common mistakes:</p><div
class="table sectionedit4"><table
class="inline"><tr
class="row0"><th
class="col0"> Problem?</th><th
class="col1"> Solution!</th></tr><tr
class="row1"><td
class="col0"> Created Geometry does not appear in scene</td><td
class="col1"> Have you attached it to (a node that is attached to) the rootNode? <br/> Does it have a Material? <br/> What is its translation (position)? Is it covered up by another Geometry? <br/> Is it too far from the camera? try <a
href="http://jmonkeyengine.org/javadoc/com/jme3/renderer/Camera.html#setFrustumFar%28float%29">cam.setFrustumFar</a>(111111f);</td></tr><tr
class="row2"><td
class="col0"> Spatial rotates wrong</td><td
class="col1"> Did you use radian values, and not degrees? (if you used degrees multiply them with FastMath.DEG_TO_RAD to get them converted to radians)<br/> Did you rotate the intended pivot node? <br/> Did you rotate around the right axis?</td></tr><tr
class="row3"><td
class="col0"> Geometry has an unexpected Material</td><td
class="col1 leftalign"> Did you reuse a Material from another Geometry and have inadvertently changed its properties? <br/> (if so, maybe consider cloning: mat2 = mat.clone(); )</td></tr></table></div></div><h2><a
name="conclusion">Conclusion</a></h2><div
class="level2"><p> You have learned that the 3D world is a Scene Graph of Spatials: Visible Geometries and invisible Nodes. You can transform Spatials, or attach them to nodes and transform the nodes. <br/> <br/> Since standard shapes like spheres and boxes get old fast, continue with the next chapter where you learn to <a
href="/com/jme3/gde/core/docs/jme3/beginner/hello_asset.html">load assets, such as 3-D models</a>.</p><div
class="tags"><span> <a
href="/wiki/doku.php/tag:beginner?do=showtag&amp;tag=tag%3Abeginner">beginner</a>, <a
href="/wiki/doku.php/tag:beginner?do=showtag&amp;tag=tag%3Abeginner">beginner,</a>, <a
href="/wiki/doku.php/tag:rootnode?do=showtag&amp;tag=tag%3Arootnode">rootNode</a>, <a
href="/wiki/doku.php/tag:node?do=showtag&amp;tag=tag%3Anode">node</a>, <a
href="/wiki/doku.php/tag:intro?do=showtag&amp;tag=tag%3Aintro">intro</a>, <a
href="/wiki/doku.php/tag:documentation?do=showtag&amp;tag=tag%3Adocumentation">documentation</a>, <a
href="/wiki/doku.php/tag:color?do=showtag&amp;tag=tag%3Acolor">color</a> </span></div></div>
<p><em><a href="http://jmonkeyengine.org/wiki/doku.php/jme3:beginner:hello_node?do=export_xhtmlbody">view online version</a></em></p>