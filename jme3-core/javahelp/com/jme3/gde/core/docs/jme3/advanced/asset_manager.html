
<h1><a name="assetmanager" id="assetmanager">AssetManager</a></h1>
<div class="level1">

<p>

JME3 has an integrated an asset manager that helps you keep your project assets organized. By assets we mean media files, such as 3D models, materials, textures, scenes, shaders, sounds, and fonts. 
</p>

<p>
The <code>assetManager</code> object is an com.jme3.asset.AssetManager instance that every com.jme3.app.Application can access. It maintains a root that also includes your project&#039;s classpath by default, so you can load any asset that&#039;s on the classpath, that is, the top level of your project directory. 
</p>

<p>
You can use the inherited <code>assetManager</code> object directly, or use the accessor <code>getAssetManager()</code>.
</p>

<p>
Here is an example how you load assets using the  AssetManager. This lines loads a default Material from the Common directory:
</p>
<pre class="code java">Material mat <span class="sy0">=</span> <span class="br0">&#40;</span>Material<span class="br0">&#41;</span> assetManager.<span class="me1">loadAsset</span><span class="br0">&#40;</span>
    <span class="kw1">new</span> AssetKey<span class="br0">&#40;</span><span class="st0">&quot;Common/Materials/RedColor.j3m&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre>
<p>
The Material is “somewhere” in the jME3 JAR, but the default Asset Manager is configured to handle a <code>Common/…</code> path correctly, so you don&#039;t have to specify the whole path.
</p>

<p>
Additionally, You can configure the Asset Manager and add any path to its root. This means, you can load assets from any project directory you specify. 
</p>

<p>
<strong>In project created with  jMonkeyPlatform, jME3 searches for models in the <code>assets</code> directory of your project by default.</strong> This is our recommended directory structure for storing assets:
</p>
<pre class="code">
MyGame/assets/Interface/
MyGame/assets/MatDefs/
MyGame/assets/Materials/
MyGame/assets/Models/
MyGame/assets/Scenes/
MyGame/assets/Shaders/
MyGame/assets/Sounds/
MyGame/assets/Textures/
MyGame/build.xml
MyGame/src/...
</pre>

<p>
These are just the most common examples, you can name the directories inside the assets directory how you like.
</p>

</div>

<h2><a name="loading_assets" id="loading_assets">Loading Assets</a></h2>
<div class="level2">
<pre class="code">      Material mat_brick = new Material( 
          assetManager, &quot;Common/MatDefs/Misc/SimpleTextured.j3md&quot;);</pre>
<pre class="code">      mat_brick.setTexture(&quot;m_ColorMap&quot;, 
          assetManager.loadTexture(&quot;Textures/Terrain/BrickWall/BrickWall.jpg&quot;));</pre>
<pre class="code">      guiFont = assetManager.loadFont(&quot;Interface/Fonts/Default.fnt&quot;);</pre>
<pre class="code">      Spatial ninja = assetManager.loadModel(&quot;Models/Ninja/Ninja.mesh.xml&quot;);</pre>
<pre class="code java">    assetManager.<span class="me1">registerLocator</span><span class="br0">&#40;</span><span class="st0">&quot;town.zip&quot;</span>, ZipLocator.<span class="kw1">class</span>.<span class="me1">getName</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
    Spatial scene <span class="sy0">=</span> assetManager.<span class="me1">loadModel</span><span class="br0">&#40;</span><span class="st0">&quot;main.scene&quot;</span><span class="br0">&#41;</span>;
    rootNode.<span class="me1">attachChild</span><span class="br0">&#40;</span>scene<span class="br0">&#41;</span>;</pre>
<p>
Here is a HttpZipLocator that can download zipped models:
</p>
<pre class="code java">    assetManager.<span class="me1">registerLocator</span><span class="br0">&#40;</span><span class="st0">&quot;http://jmonkeyengine.googlecode.com/files/wildhouse.zip&quot;</span>, 
                                 HttpZipLocator.<span class="kw1">class</span>.<span class="me1">getName</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
    Spatial scene <span class="sy0">=</span> assetManager.<span class="me1">loadModel</span><span class="br0">&#40;</span><span class="st0">&quot;main.scene&quot;</span><span class="br0">&#41;</span>;
    rootNode.<span class="me1">attachChild</span><span class="br0">&#40;</span>scene<span class="br0">&#41;</span>;</pre>
<p>
JME3 offers ClasspathLocator, ZipLocator, FileLocator, HttpZipLocator, and UrlLocator (see <code>com.jme3.asset.plugins</code>). 
</p>
<table class="inline">
	<tr class="row0">
		<th class="col0"> Task? </th><th class="col1"> Solution! </th>
	</tr>
	<tr class="row1">
		<td class="col0"> Load a model with materials </td><td class="col1"> Use the asset managers <code>loadModel()</code> method and attach the Spatial to the rootNode. <pre class="code java">Spatial elephant <span class="sy0">=</span> assetManager.<span class="me1">loadModel</span><span class="br0">&#40;</span><span class="st0">&quot;Models/Elephant/Elephant.mesh.xml&quot;</span><span class="br0">&#41;</span>;
rootNode.<span class="me1">attachChild</span><span class="br0">&#40;</span>elephant<span class="br0">&#41;</span>;</pre><pre class="code java">Spatial elephant <span class="sy0">=</span> assetManager.<span class="me1">loadModel</span><span class="br0">&#40;</span><span class="st0">&quot;Models/Elephant/Elephant.j3o&quot;</span><span class="br0">&#41;</span>;
rootNode.<span class="me1">attachChild</span><span class="br0">&#40;</span>elephant<span class="br0">&#41;</span>;</pre></td>
	</tr>
	<tr class="row2">
		<td class="col0"> Load a model without materials </td><td class="col1"> If you have a model without materials, you have to add a default material to make it visible. <pre class="code java">Spatial teapot <span class="sy0">=</span> assetManager.<span class="me1">loadModel</span><span class="br0">&#40;</span><span class="st0">&quot;Models/Teapot/Teapot.obj&quot;</span><span class="br0">&#41;</span>;
Material mat <span class="sy0">=</span> <span class="kw1">new</span> Material<span class="br0">&#40;</span>assetManager, <span class="st0">&quot;Common/MatDefs/Misc/ShowNormals.j3md&quot;</span><span class="br0">&#41;</span>;
teapot.<span class="me1">setMaterial</span><span class="br0">&#40;</span>mat<span class="br0">&#41;</span>;
rootNode.<span class="me1">attachChild</span><span class="br0">&#40;</span>teapot<span class="br0">&#41;</span>;</pre></td>
	</tr>
	<tr class="row3">
		<td class="col0"> Load a scene </td><td class="col1"> You load scenes just like you load models: <pre class="code java">Spatial scene <span class="sy0">=</span> assetManager.<span class="me1">loadModel</span><span class="br0">&#40;</span><span class="st0">&quot;Scenes/house/main.scene&quot;</span><span class="br0">&#41;</span>;
rootNode.<span class="me1">attachChild</span><span class="br0">&#40;</span>scene<span class="br0">&#41;</span>;</pre></td>
	</tr>
</table>

</div>

<h2><a name="nullpointerexceptioncannot_locate_resource" id="nullpointerexceptioncannot_locate_resource">NullPointerException: Cannot locate resource?</a></h2>
<div class="level2">

<p>

An error mesage similar to the following can occur in the console when you run executables, even if the game runs fine when started from the jMoneykPlatform. 
</p>
<pre class="code">com.jme3.asset.DesktopAssetManager loadAsset
WARNING: Cannot locate resource: Scenes/town/main.scene
com.jme3.app.Application handleError
SEVERE: Uncaught exception thrown in Thread[LWJGL Renderer Thread,5,main]
java.lang.NullPointerException
</pre>

<p>
Reason: If you use the default build script created by the jMonkeyPlatform then <strong>the original OgreXML files are not included in the executable.</strong> 
</p>

<p>
For a stand-alone build, you <strong>work with .j3o files only</strong>. The default build script makes sure to include .j3o files in the executable. 
</p>

<p>
You must use the jMonkeyPlatform&#039;s context menu action to <a href="/com/jme3/gde/core/docs/jme3/jmonkeyplatform/model_loader_and_viewer.html" class="wikilink2" title="jme3:jmonkeyplatform:model_loader_and_viewer" rel="nofollow">convert OgreXML models to .j3o format</a> to get rid of this error. 

</p>
<ol>
<li class="level1"><div class="li"> Open the JME3 Project in the jMonkeyplatform.</div>
</li>
<li class="level1"><div class="li"> Browse the Assets directory in the Projects window. </div>
</li>
<li class="level1"><div class="li"> Right-click a .mesh.xml file, and choose “convert to JME3 binary”. </div>
</li>
<li class="level1"><div class="li"> The converted file appears in the same directory as the .mesh.xml file. It has the same name  and a .j3o suffix. </div>
</li>
</ol>

</div>

<h2><a name="asset_handlingcodeless_projects" id="asset_handlingcodeless_projects">Asset Handling: Codeless Projects</a></h2>
<div class="level2">

<p>

If you are using another IDE than jMonkeyPlatform, you can create a codeless project in the jMonkeyPlatform to maintain assets. This method will not meddle with your sources or custom build scripts, but you can still browse your assets, and preview, arrange, and convert models. You can, for example, give the designers in your team access to such a codeless project.
</p>

</div>
<p><em><a href="http://jmonkeyengine.org/wiki/doku.php/jme3:advanced:asset_manager?do=export_xhtmlbody">view online version</a></em></p>