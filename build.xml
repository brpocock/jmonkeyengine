<project name="jME" default="compile" basedir="." >
    <description>
        Ant Build File for the jME project.
    </description>

  <property name="seg"      location="."/>

  <property name="src"      location="${seg}/src"/>
  <property name="class"    location="${seg}/build"/>
  <property name="data"     location="${seg}/data"/>
  <property name="doc"     location="${data}/doc"/>

  <target name="init">
    <tstamp/>
    <mkdir dir="${src}"/>
    <mkdir dir="${class}"/>
    <mkdir dir="${data}"/>
    <mkdir dir="${doc}"/>
  </target>

  <target name="compile" depends="init" description="generate jme classes">
    <mkdir dir="${class}"/>
    <mkdir dir="${class}/com"/>
    <copy todir="${class}/com">
        <fileset dir="${src}/com">
            <exclude name="**/*.java" />
        </fileset>
    </copy>
    <javac source="1.4" srcdir="${src}/com" destdir="${class}" classpath="${seg}/lib/lwjgl.jar:${seg}/lib/jogg-0.0.5.jar:${seg}/lib/jorbis-0.0.12.jar:${seg}/lib/lwjgl_fmod3.jar:${seg}/target/jme-sound.jar:${seg}/target/jme-model.jar:${seg}/target/jme-terrain.jar:${seg}/target/jme-ui.jar:${seg}/target/jme-effects.jar" listfiles="no"/>
  </target>
<!-- ************************************************************************* -->

  <target name="dist-core" depends="compile" description="generate jme jar file" >
    <jar jarfile="${seg}/target/jme.jar"  basedir="${class}" update="no" compress="false" includes="**/com/jme/**/*.class" />
  </target>
	
	<target name="dist-effects" depends="compile" description="generate jme jar file (effects)" >
	    <jar jarfile="${seg}/target/jme-effects.jar"  basedir="${class}" update="no" compress="false" includes="**/com/jmex/effects/**/*.class" />
	  </target>
	<target name="dist-terrain" depends="compile" description="generate jme jar file (terrain)" >
		    <jar jarfile="${seg}/target/jme-terrain.jar"  basedir="${class}" update="no" compress="false" includes="**/com/jmex/terrain/**/*.class" />
		  </target>
	<target name="dist-model" depends="compile" description="generate jme jar file (model)" >
		    <jar jarfile="${seg}/target/jme-model.jar"  basedir="${class}" update="no" compress="false" includes="**/com/jmex/model/**/*.class" />
		  </target>
	<target name="dist-sound" depends="compile" description="generate jme jar file (sound)" >
		    <jar jarfile="${seg}/target/jme-sound.jar"  basedir="${class}" update="no" compress="false" includes="**/com/jmex/sound/**/*.class" />
		  </target>
	<target name="dist-ui" depends="compile" description="generate jme jar file (ui)" >
		    <jar jarfile="${seg}/target/jme-ui.jar"  basedir="${class}" update="no" compress="false" includes="**/com/jmex/ui/**/*.class" />
		  </target>
	<target name="dist-all" depends="dist-core, dist-terrain, dist-effects, dist-model, dist-sound, dist-ui" description="Build all jar files"/>

  <target name="webdist-all" depends="dist-all" description="sign JARs for JNLP distribution" >
    <signjar jar="${seg}/target/jme.jar"
      alias="jme"
      keystore="${seg}/jnlp/jmeKeyStore"
      storepass="..."
    />
  	<signjar jar="${seg}/target/jme-effects.jar"
  	      alias="jme"
  	      keystore="${seg}/jnlp/jmeKeyStore"
  	      storepass="..."
  	    />
    	<signjar jar="${seg}/target/jme-terrain.jar"
    	      alias="jme"
    	      keystore="${seg}/jnlp/jmeKeyStore"
    	      storepass="..."
    	    />
  	<signjar jar="${seg}/target/jme-model.jar"
    alias="jme"
    keystore="${seg}/jnlp/jmeKeyStore"
    storepass="..."
  />
  	<signjar jar="${seg}/target/jme-sound.jar"
  	      alias="jme"
  	      keystore="${seg}/jnlp/jmeKeyStore"
  	      storepass="..."
  	    />
  	<signjar jar="${seg}/target/jme-ui.jar"
  	      alias="jme"
  	      keystore="${seg}/jnlp/jmeKeyStore"
  	      storepass="..."
  	    />
  </target>

<!-- java doc ************************************************************************* -->
  <target name="doc" depends="compile" description="generate the doc">
     <javadoc destdir="${doc}" author="true" version="true" use="true" package="yes" windowtitle="jME API">
       <fileset dir="${src}/com">
         <include name="**/*.java" />
       </fileset>
    </javadoc>
  </target>

  <target name="clean" description="clean up" >
     <delete dir="${class}"/>
     <delete dir="${doc}"/>
     <delete>
        <fileset dir="${src}" includes="**/*.class"/>
     </delete>
  </target>

  <target name="rebuild" depends="clean" description="build from clean" >
     <ant/>
  </target>
</project>